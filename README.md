# Restaurant-Manager6
The RestaurantManager project was designed to manage reservations for customers by containing both a customer and a reservation database. The purpose of this app is for users to create a new customer and add their information for staff to contact them when needed. They then book a reservation to assign the customer by choosing a customer id. The user then has to submit the date when the customer will reserve the seat, how many guests will arrive, and any special requests if they have any. 

| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 10 | Modeling | Create Customer and Reservation Entities | To assign customers to their tables | Customer table created, reservation table created, relationship works | Check if database exist, if not run migration |
## Week 10 Modeling Write-up
I created both customer and reservation models while forming a relationship with each other. The project would let useers input customer info and reserve a table for that customer. The customer would be required to include his name, email, and phone number and then book his reservation to the specified table. I updated the customer model to limit the number of charaters of the name from 1 to 50 because I think its a reasonable range to use. I also added a space in the PhoneNumber property to display Phone Number and made sure users will input a valid number. After creating a customer, the user can then create a reservation and input the customers id, along with the time the customer will arrive, the number of guests that will reserve the table, and any special requests if neccessary. I updated the reservation model by adding a custom attribute to limit users to input a reservation time only from the future since it wouldnt make sence to reserve a date in the past. I've limited the number of guests a reservation can take to 100 and allowed special requests to be nullable so adding requests would only be optional. At first, I thought of changing the reservation views so the user can have a drop down of customer names rather than ids when creating, but I then considered how inefficient it would be since there could be two customers with the same name. I also added spaces in ReservationTime, NumberOfGuests, and SpecialRequests for readability. The only change I made was informing users that special requests are optional using the display attribute. I then added and updated the datebase, then seeded both databases to reflect the two models.
| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 11 | Separation of Concerns / Dependency Injection | Add ICustomerService and IReservationService to separate operations from controller and _NotificationsPartial to display user notifications | Separating services from the controller through decoupling while maintaining its logic and adding confirmation messages | Services have maintained operations, constructor implemented, and messages implemented | Call methods to verify functionality and used by controllers correctly |
## Week 11 Separation of Concerns Write-up
I have successfully separated logic from both the CustomersController and ReservationsController by moving them into their own service classes. I also separeted toastr logic from its CRUD operations with a partial view named _NotificationsPartial so I would'nt have to repeat the process, therefore following the dont repeat yourself principle. At first, I thought of just moving some logic out from the controllers until I thought it would be better to move out any logic that uses RestaurantManagerContext into its services to improve efficiancy and organization. While I did have some ups and downs, I was able to use RestaurantManagerContext only in its services, separate from its controllers and call all its methods using only ICustomerService and IReservationService. Despite changes from moving logic from one place to another, the program should maintain its CRUD operations within the databases the same way as before. While I have added a few more confirmation messages, my main focus was separating concerns between controllers, services, and views this week, but my plan will be adding more notifications later on. Since I've used a partial view, all I would have to do later on is add notifications using TempData while making sure that partial tags are in the index views.
| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 12 | CRUD | Add forms to create, edit, and delete customers and reservations; confirmation messages are shown | Users can add, update, or delete customer/reservation | Forms are shown in application, message confirmations are shown after form changes | Add, edit, and delete a customer and reservation; ensure messages are not displayed before changes; ensure feedback is shown after a change |
## Week 12 CRUD Write-up
I have included all forms in my databases using create, edit, and delete. Once the program starts up, users can create a customer and will be required to fill in their information; their name, their email, and phone number. After filling out their information, a confirmation message is shown in the index page so the user will know that the customer has been successfully added. They can then add a reservation and choose the id of the customer from the drop down menu. I have used a custom attribute that will require users to input the reservation time only if its from the future, that way there will not end with confusion from staff in a real world experience because it would'nt make sense for customers to plan their arrival at a date thats already passed. Users will also be required to enter how many guests will arrive when creating a reservation, adding a limit to 100 guests, that way staff will know exactly how many seats they will need while also not having to prepare for an overwhelming number of customers. Special requests are included as optional, so users will not be required to fill it out if they don't need to. Similar to the customer database, a confirmation will appear to inform the user that a reservation was added successfully. I also included confirmation messages for both delete and edit forms and search features to filter names from both customer and reservations.
<img width="531" height="457" alt="image" src="https://github.com/user-attachments/assets/b978ff4e-28d8-4ac8-a298-84416d2505fa" />
<img width="1270" height="479" alt="image" src="https://github.com/user-attachments/assets/2c994072-0964-439f-b9cc-1c0a1af934a7" />
<img width="1396" height="320" alt="image" src="https://github.com/user-attachments/assets/4d27c4ba-487b-4a28-85ac-7a6733e27746" />
<img width="510" height="495" alt="image" src="https://github.com/user-attachments/assets/270ed11e-630e-4479-adf0-7fcabe20897f" />
<img width="861" height="644" alt="image" src="https://github.com/user-attachments/assets/319da904-4dea-4c43-84f4-515e66487f55" />

| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 13 | Diagnostics | Adding health endpooint | Creating a health check to determine whether or not the database is reachable | Healthy when database is reachable, unhealthy when unreachable | Ensure endpoint returns Healthy after running migrations, change connection string in appsettings.json, then add health endpoint again to ensure it returns Unhealthy |
## Week 13 Diagnostics Write-up
I was able to figure out how to sucessfully connect the health checker to the databases using the database health checker. Now once I call the health endpoint, it should return a Healthy status every time as long as the database connections are intact. Using the DatabaseHealthCheck class, It should make sure that the health check can connect to the database and include a log to record a success message at every successfull connection, otherwise, it will give a message that the database was unreachable and return an unhealthy status. I have added a health check in Program.cs to apply the mapping of the health endpoint so it will return healthy at every succesfull database connection and unhealthy at every connection failure once I run the application using the created DatabaseHealthCheck class. I have tested to ensure it will return unhealty when appending /healthz by modifying the database conntection in appsettings.json in RestaurantManagerContext. Once I change the connection strings in RestaurantManagerContext, it will return an unhealthy status as it should. These factors would prove that AddHealthChecks and MapHealthChecks will run the health checks properly and therefore connect to the database rather than always returning a Healthy status for the app in general no matter the reachability of the database. Along with the status, I also added more detail in the output which now includes the name, exception, duration, and description after the endpoint call.
<img width="1201" height="62" alt="image" src="https://github.com/user-attachments/assets/2f100658-6a0b-4842-9cd1-8fb70ae19f15" />
<img width="1260" height="56" alt="image" src="https://github.com/user-attachments/assets/3d876120-ac37-4bfc-ac5e-52b6ea9ddbbb" /> 
| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 14 | Logging | Log every time a customer/reservation is created, updated, or deleted; log every endpoint call and seeding | Having a record of customer and reservation behavior; record every time health endpoint is called; seeding records | Logs contain name and date of behavior | Create, edit, and delete customer and reservation, confirm log output; append health endpoint, confirm log output |
## Week 14 Logging Write-up
The logging is complete when the application logs messages after every CRUD operation. After a few updates with my application, I not only included the entity ids for logging, but also added the correlation id and action names to the log messages into my customer and reservation services. Going through the process of including more detailed information made me realize how useful it can be for auditing log records and even added date and time information so others can see through the records on when an operation was performed. I also added logging for calling the health endpoints and included date and time information there as well. Now every time I execute each CRUD operation, it should display more details than it did in previous projects now that I've included the correlation ids, entity ids, action names and also the date/time as of when CRUD were used. The same would be said for the health endpoint calls when it comes to the date and time. Now that Iâ€™ve included LogWarning and LogError, it should display records every time each CRUD operation has failed at any point in time. This additional information should make auditing easier, improve diagnosing problems, and the overall performance in security by inspecting any changes that were unauthorized. I began to realize how useful correlation ids are for request tracking and actions for display action names.
| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 15 | Stored Procedures | Call customers and reservations by id, Call top 3 customers by number of guests | Maintiaining database behavior while using stored procedure along with leaderboard of number of guests | Stored procedure implemented, results correctly displayed | Run app, ensure databases are maintained; reservations only show top three number of guests  |
## Week 15 Stored Procedures Write-up
I have completed my stored procedure implementation by not only adding spGetCustomerById and spGetReservationById, which gets an id from customers and reservations through service classes, but also a stored procedure named spGetTop3NumberOfGuestsReservations that displays the top 3 customers by the number of guests for the reservations database. At first, I created the first two stored procedures using migrations, but this time used spGetTop3NumberOfGuestsReservations and created the stored procedure manually in SQL Server Object Explorer, showcasing two ways to create a stored procedure. While this wasn't part of my project plan for getting the top 3 number of guests, I thought It would be better to add one more stored procedure that actually affects what the user sees in the UI. The stored procedures for spGetCustomerById and spGetReservationById should select all of its data from the customer and reservation database, therefore maintaining its intended functionality while spGetTop3NumberOfGuestsReservations should only select the top three number of guests. Trying to implement a stored procedure for GerReservationsById and spGetTop3NumberOfGuestsReservations was much harder than the GetCustomerById method since FromSqlRaw doesn't seem to automatically include customer entities, but eventually was able to get the idea and figure out how to solve the problem by adding a reference and loading the customer entity.
<img width="1438" height="854" alt="image" src="https://github.com/user-attachments/assets/eb1bebf8-7e35-4ea3-b13c-fae9290bb3f0" />
| Week | Concept | Feature | Goal | Acceptance Criteria | Test plan |
| --- | --- | --- | --- | --- | --- |
| 16 | Deployment | Delpoying app to Azure App Service | Making the application accessible with a unique URL | Azure App Service created, RestaurantManager runs on Azure, health endpoint works  | Visit website, confirm endpoint and navigation |
## Week 16 Deployment Write-up
Im having problems with setting up azure, but I hope to be able to deploy my application. While I'm still in the process of getting familiar with Azure, I plan to build a web app with Azure Web Apps and might name its resource group RGRestaurant since my application is a restaurant management system. Deployment to azure app service is complete when I'm able to create the web app with a supported region because every time I try selecting a region and initializing deployment, it would throw an error saying that its region is not supported. If deployment progress ever suceeds, I should be able to navigate to the apps website to make sure the application is up and running. Once I know the application is running, I plan to go to my RestaurantManager app and right click the main directory in solution explorer to publish to Azure App service for windows after logging in. The site should successfully load and maintain all its functions. It should also take the user to the RestaurantManager website when clicking the url after clicking the webside from Azure Portals home page. If everything still works as before after deployment, then the deployment process would be confirmed as completed.
